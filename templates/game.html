{% extends "base.html" %}
{% block content%}
    <!-- game library header -->
    <div class="title text-center bg-yellow curved-container py-2">
        <h1 class="capitalize"><strong>{{ game.game_title }}</strong></h1>
        <p class="card-text capitalize"><strong>Publisher: </strong>{{ game.publisher }}</p>
    </div>

    <!-- game full details card -->
    <div class="container-fluid m-0 p-0">
        <div class="card m-3">
            <div class="row no-gutters p-2">
                <div class="col-sm-12 col-md-4 mx-auto my-auto game-image-container">
                    <img id="game-image" src="{{ game.image }}"
                            class="card-img-top"
                            alt="An image of the game {{ game.game_title}}"
                            no-repeat center center>
                </div>
                <div class="col-sm-12 col-md-8">
                    <div class="card-body">
                        <p class="card-text"><strong>Min Players: </strong>{{ game.min_players }}</p>
                        <p class="card-text"><strong>Max Players: </strong>{{ game.max_players }}</p>
                        <p class="card-text"><strong>Avg Playtime: </strong>{{ game.avg_playtime_mins }}</p>
                        <p class="card-text"><strong>Difficulty: </strong>{{ game.difficulty }}</p>
                        <p class="card-text"><strong>Description: </strong>{{ game.description }}</p>
                    </div>
                    <!-- add to user collection / user wishlist buttons -->
                    <div class="text-centear">
                        <a href="{{ url_for('collection', game_id=game._id) }}"
                            class="btn btn-outline-primary mx-3"><strong>Add to Collection</strong></a>
                        <button type="submit" class="btn btn-outline-info mx-3"><strong>Add to Wishlist</strong></button>
                        <a href="{{ url_for('game', game_id=game._id) }}" class="btn btn-outline-primary text-center mx-3"
                            data-toggle="modal" data-target="#writeReviewModal">
                            <i class="fa-solid fa-pencil mx-1" aria-hidden="true"></i>Leave a review</a>
                        <a href="{{ url_for('library') }}" class="btn btn-outline-info back-to-library text-center mx-3">
                            <i class="fa-solid fa-chevron-left mx-1" aria-hidden="true"></i>Back to main game library</a>
                    </div>
                </div>
                <div class="modal fade" id="writeReviewModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">
                            <div class="modal-header bg-yellow">
                                <h5 class="modal-title"><strong>Write a review for {{ game.game_title }}...</strong></h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span class="text-purple" aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <form class="modal-body" method="POST" action="{{ url_for('game', game_id=game._id) }}">
                                <!-- review title input -->
                                <div class="form-group m-2 row">
                                    <label for="review-title" class="mr-2" aria-hidden="true">Review Title:</label>
                                    <input type="text" placeholder="Give your review a title" required
                                        id="review-title" name="review-title" min-length="5" maxlength="30">
                                </div>
                                <!-- review main text input -->
                                <div class="form-group m-2 row">
                                    <label for="review" class="mr-2" aria-hidden="true">Review:</label>
                                    <textarea type="text" required id="review" name="review" 
                                        min-length="5" maxlength="250" rows="5" cols="60">
                                    </textarea>
                                    <small class="text-muted">Reviews are limited to 250 characters.</small>
                                </div>
                                <div class="modal-footer bg-yellow">
                                    <button 
                                        type="button" data-dismiss="modal"
                                        class="btn btn-lg btn-primary my-2">
                                        <i class="fa-solid fa-chevron-left mx-1" aria-hidden="true"></i> Back</button>
                                    <button
                                        type="submit"
                                        class="btn btn-lg bg-info text-white my-2">
                                            Submit
                                        <i class="fa-solid fa-check mx-1" aria-hidden="true"></i>
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- user reviews for current active boardgame -->
        <div class="card m-3">
            <div class="card-title bg-yellow">
                <h3 class="capitalize m-3"><strong>user reviews for {{ game.game_title }}</strong></h3>
            </div>
            <div class="card-body">
                {% for review in relevant_reviews %}
                <div class="review-entry">
                    <h5><strong>{{ review.review_title }}</strong></h5>
                    <p>{{ review.review }}</p>
                    <p>User: {{ review.username }}</p>
                </div>
                {% endfor %}
            </div>
    </div>
{% endblock %}
